<?php namespace Rest\Controllers;/** * Created by PhpStorm. * User: rjgun * Date: 10/04/2016 * Time: 19:24 */use Jacwright\RestServer\RestException;use Rest\Classes\Database;use Rest\Functions;class DefaultController{    protected $db;    protected $user;    protected $type;    protected $admin;    public function __construct()    {        $this->db = new Database();    }    /**     * Checks whether user is authorised     */    public function authorize()    {        $this->db = new Database();        $this->user = ('rjg70');//$_SERVER['REMOTE_USER']);        $this->db->query('SELECT * FROM users WHERE crsid = :id');        $this->db->bind(':id', $this->user);        $row = $this->db->single();        //print_r($row);        if ($row) {            if ($row["authorised"]) {                $this->admin = $row["admin"];                $this->type = $row["type"];                return true;            }        }        return false;    }    /**     * Gets the user by id or current user     *     * @url GET /     * @return     */    public function getData()    {        $id = $this->user;        $this->db->query('SELECT * FROM users WHERE crsid = :id');        $this->db->bind(':id', $id);        $row = $this->db->single();        return $row;    }    /**     * Throws an error     *     * @url GET /error     */    public function throwError()    {        throw new RestException(401, "Empty password not allowed");    }}